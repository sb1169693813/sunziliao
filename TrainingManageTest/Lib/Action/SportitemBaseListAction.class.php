<?phpclass SportitemBaseListAction extends  BaseAction{	//动作库列表首页	public function index()	{		//当前页码		$nowpage  = isset($_GET['pageIndex']) ? trim($_GET['pageIndex']) : 1;		//审核状态		$auditstatus = isset($_GET['auditstatus']) ? trim($_GET['auditstatus']):null;		$cp = new CommonPRM();		$pageInfo = new PageInfo();		$pageInfo->nowpage = $nowpage;		$pageInfo->pagesize = 10;		$cp->pageinfo = $pageInfo;		$btbSportitemBasePRM = new BtbSportitemBasePRM();		$btbSportitemBasePRM->order_by = ' id DESC ';		if(!is_null($auditstatus))		{			if(is_numeric($auditstatus))			{				//auditstatus不为空赋予查询条件				$btbSportitemBasePRM->auditstatus = $auditstatus;				//分页跳转的时候保证查询条件				$urlPrefix ='SportitemBaseList/index?auditstatus='.$auditstatus;			}		}		else		{			$urlPrefix ='SportitemBaseList/index';		}		//获取登录者的信息		$user = $this->getLoginInfo();		$btbSportitemBasePRM->obj_createuser = $user['id'];		//echo $user['id'];		//exit;		//动作库List		$sportitemBaseList = BtbSportitemBaseBLL::getSportitemBaseList($cp,$btbSportitemBasePRM);		$page = new CLinkPager($pageInfo->totalcount,$pageInfo->pagesize,$urlPrefix);		$show = $page->show();		$this->assign('auditstatus',$auditstatus);		$this->assign('totalcount',$pageInfo->totalcount);    	$this->assign('page',$show);		$this->assign('sportitemBaseList',$sportitemBaseList);		//menu动作库		$this->assign('headtype',2);		//课程管理1还是课程审核页面0		$this->assign('coachtype',$user['type']);		//$this->display("SportitemBaseList/index");		$this->display("SportitemBase/index");	}		//动作查看	public function view()	{		//sportitem_base_id		$sportitem_base_id = isset($_GET['sportitem_base_id'])?trim($_GET['sportitem_base_id']):null;		//设置跳转session值		SessionData::setPageData('SportitemBaseDetail', 'sportitem_base_id', $sportitem_base_id);		//查看1		SessionData::setPageData('SportitemBaseDetail', 'actiontype', 1);		$this->redirect("SportitemBaseDetail/index");	}		       //动作编辑    public function update()    {    	//$cp = new CommonPRM();    	//sportitem_base_id		$sportitem_base_id = isset($_GET['sportitem_base_id'])?trim($_GET['sportitem_base_id']):null;    	//设置跳转session值		SessionData::setPageData('SportitemBaseDetail', 'sportitem_base_id', $sportitem_base_id);		//编辑2		SessionData::setPageData('SportitemBaseDetail', 'actiontype', 2);    	$this->redirect('SportitemBaseDetail/index');    }        //动作提交//    public function sportitemBaseCommit()//    {//    	$sportitem_base_id = isset($_POST['sportitem_base_id']) ? trim($_POST['sportitem_base_id']):null;//    	$data = array();//		$data['id'] = $sportitem_base_id;//		//审核状态 改为审核中//		$data['auditstatus'] = 1;//		$rows = BtbSportitemBaseBLL::btbSportitemBaseUpdate($data);//		if($rows > 0)//		{//			$flag = 1;//		}//		else//		{//			$flag = 0;//		}//		$this->ajaxReturn($flag);//    }}